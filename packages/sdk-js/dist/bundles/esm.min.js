const t={fetch:globalThis.fetch?globalThis.fetch.bind(globalThis):void 0,SubtleCrypto:globalThis.crypto?globalThis.crypto.subtle:void 0,EventSource:globalThis.EventSource};function e(){return t}function n(t){let e=2166136261;const n=t.length;for(let i=0;i<n;i++)e^=t.charCodeAt(i),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return e>>>0}function i(t,e,i){return 2===i?n(n(t+e)+"")%1e4/1e4:1===i?n(e+t)%1e3/1e3:null}function r(t,e){return t>=e[0]&&t<e[1]}function s(t){try{const e=t.replace(/([^\\])\//g,"$1\\/");return new RegExp(e)}catch(t){return void console.error(t)}}function o(t,e){if(!e.length)return!1;let n=!1,i=!1;for(let r=0;r<e.length;r++){const s=u(t,e[r].type,e[r].pattern);if(!1===e[r].include){if(s)return!1}else n=!0,s&&(i=!0)}return i||!n}function u(t,e,n){try{const i=new URL(t,"https://_");if("regex"===e){const t=s(n);return!!t&&(t.test(i.href)||t.test(i.href.substring(i.origin.length)))}return"simple"===e&&function(t,e){try{const n=new URL(e.replace(/^([^:/?]*)\./i,"https://$1.").replace(/\*/g,"_____"),"https://_____"),i=[[t.host,n.host,!1],[t.pathname,n.pathname,!0]];return n.hash&&i.push([t.hash,n.hash,!1]),n.searchParams.forEach(((e,n)=>{i.push([t.searchParams.get(n)||"",e,!1])})),!i.some((t=>!function(t,e,n){try{let i=e.replace(/[*.+?^${}()|[\]\\]/g,"\\$&").replace(/_____/g,".*");return n&&(i="\\/?"+i.replace(/(^\/|\/$)/g,"")+"\\/?"),new RegExp("^"+i+"$","i").test(t)}catch(t){return!1}}(t[0],t[1],t[2])))}catch(t){return!1}}(i,n)}catch(t){return!1}}const c=t=>Uint8Array.from(atob(t),(t=>t.charCodeAt(0)));async function a(e,n,i){if(n=n||"",!(i=i||globalThis.crypto&&globalThis.crypto.subtle||t.SubtleCrypto))throw new Error("No SubtleCrypto implementation found");try{const t=await i.importKey("raw",c(n),{name:"AES-CBC",length:128},!0,["encrypt","decrypt"]),[r,s]=e.split("."),o=await i.decrypt({name:"AES-CBC",iv:c(r)},t,c(s));return(new TextDecoder).decode(o)}catch(t){throw new Error("Failed to decrypt")}}function h(t){return"string"==typeof t?t:JSON.stringify(t)}function l(t){"number"==typeof t&&(t+=""),t&&"string"==typeof t||(t="0");const e=t.replace(/(^v|\+.*$)/g,"").split(/[-.]/);return 3===e.length&&e.push("~"),e.map((t=>t.match(/^[0-9]+$/)?t.padStart(5," "):t)).join("-")}function f(t){return"object"==typeof t&&null!==t}function d(t){return t.urlPatterns&&t.variations.some((t=>f(t)&&"urlRedirect"in t))?"redirect":t.variations.some((t=>f(t)&&(t.domMutations||"js"in t||"css"in t)))?"visual":"unknown"}const y={staleTTL:6e4,maxAge:864e5,cacheKey:"gbFeaturesCache",backgroundSync:!0,maxEntries:10,disableIdleStreams:!1,idleStreamInterval:2e4,disableCache:!1},p=e(),w={fetchFeaturesCall:t=>{let{host:e,clientKey:n,headers:i}=t;return p.fetch("".concat(e,"/api/features/").concat(n),{headers:i})},fetchRemoteEvalCall:t=>{let{host:e,clientKey:n,payload:i,headers:r}=t;const s={method:"POST",headers:{"Content-Type":"application/json",...r},body:JSON.stringify(i)};return p.fetch("".concat(e,"/api/eval/").concat(n),s)},eventSourceCall:t=>{let{host:e,clientKey:n,headers:i}=t;return i?new p.EventSource("".concat(e,"/sub/").concat(n),{headers:i}):new p.EventSource("".concat(e,"/sub/").concat(n))},startIdleListener:()=>{let t;if("undefined"==typeof window||"undefined"==typeof document)return;const e=()=>{"visible"===document.visibilityState?(window.clearTimeout(t),C()):"hidden"===document.visibilityState&&(t=window.setTimeout($,y.idleStreamInterval))};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},stopIdleListener:()=>{}};try{globalThis.localStorage&&(p.localStorage=globalThis.localStorage)}catch(t){}const v=new Map;let g=!1;const m=new Map,b=new Map,k=new Map,S=new Set;function A(t){Object.assign(p,t)}function _(t){Object.assign(y,t),y.backgroundSync||j()}async function O(){m.clear(),b.clear(),j(),g=!1,await N()}async function x(t){let{instance:e,timeout:n,skipCache:i,allowStale:r,backgroundSync:s}=t;return s||(y.backgroundSync=!1),async function(t){let{instance:e,allowStale:n,timeout:i,skipCache:r}=t;const s=R(e),o=B(e),u=new Date,c=new Date(u.getTime()-y.maxAge+y.staleTTL);await async function(){if(!g){g=!0;try{if(p.localStorage){const t=await p.localStorage.getItem(y.cacheKey);if(!y.disableCache&&t){const e=JSON.parse(t);e&&Array.isArray(e)&&e.forEach((t=>{let[e,n]=t;m.set(e,{...n,staleAt:new Date(n.staleAt)})})),T()}}}catch(t){}if(!y.disableIdleStreams){const t=w.startIdleListener();t&&(w.stopIdleListener=t)}}}();const a=y.disableCache||r?void 0:m.get(o);if(a&&(n||a.staleAt>u)&&a.staleAt>c)return a.sse&&S.add(s),a.staleAt<u?M(e):V(e),{data:a.data,success:!0,source:"cache"};{const t=await function(t,e){return new Promise((n=>{let i,r=!1;const s=t=>{r||(r=!0,i&&clearTimeout(i),n(t||null))};e&&(i=setTimeout((()=>s()),e)),t.then((t=>s(t))).catch((()=>s()))}))}(M(e),i);return t||{data:null,success:!1,source:"timeout",error:new Error("Timeout")}}}({instance:e,allowStale:r,timeout:n,skipCache:i})}function E(t){const e=R(t),n=v.get(e)||new Set;n.add(t),v.set(e,n)}function $(){k.forEach((t=>{t&&(t.state="idle",U(t))}))}function C(){k.forEach((t=>{t&&"idle"===t.state&&I(t)}))}async function N(){try{if(!p.localStorage)return;await p.localStorage.setItem(y.cacheKey,JSON.stringify(Array.from(m.entries())))}catch(t){}}function R(t){const[e,n]=t.getApiInfo();return"".concat(e,"||").concat(n)}function B(t){const e=R(t);if(!t.isRemoteEval())return e;const n=t.getAttributes(),i=t.getCacheKeyAttributes()||Object.keys(t.getAttributes()),r={};i.forEach((t=>{r[t]=n[t]}));const s=t.getForcedVariations(),o=t.getUrl();return"".concat(e,"||").concat(JSON.stringify({ca:r,fv:s,url:o}))}function T(){const t=Array.from(m.entries()).map((t=>{let[e,n]=t;return{key:e,staleAt:n.staleAt.getTime()}})).sort(((t,e)=>t.staleAt-e.staleAt)),e=Math.min(Math.max(0,m.size-y.maxEntries),m.size);for(let n=0;n<e;n++)m.delete(t[n].key)}function F(t,e,n){const i=n.dateUpdated||"",r=new Date(Date.now()+y.staleTTL),s=y.disableCache?void 0:m.get(e);if(s&&i&&s.version===i)return s.staleAt=r,void N();y.disableCache||(m.set(e,{data:n,version:i,staleAt:r,sse:S.has(t)}),T()),N();const o=v.get(t);o&&o.forEach((t=>async function(t,e){await t.setPayload(e||t.getPayload())}(t,n)))}async function M(t){const{apiHost:e,apiRequestHeaders:n}=t.getApiHosts(),i=t.getClientKey(),r=t.isRemoteEval(),s=R(t),o=B(t);let u=b.get(o);return u||(u=(r?w.fetchRemoteEvalCall({host:e,clientKey:i,payload:{attributes:t.getAttributes(),forcedVariations:t.getForcedVariations(),forcedFeatures:Array.from(t.getForcedFeatures().entries()),url:t.getUrl()},headers:n}):w.fetchFeaturesCall({host:e,clientKey:i,headers:n})).then((t=>{if(!t.ok)throw new Error("HTTP error: ".concat(t.status));return"enabled"===t.headers.get("x-sse-support")&&S.add(s),t.json()})).then((e=>(F(s,o,e),V(t),b.delete(o),{data:e,success:!0,source:"network"}))).catch((t=>(b.delete(o),{data:null,source:"error",success:!1,error:t}))),b.set(o,u)),u}function V(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=R(t),i=B(t),{streamingHost:r,streamingHostRequestHeaders:s}=t.getApiHosts(),o=t.getClientKey();if(e&&S.add(n),y.backgroundSync&&S.has(n)&&p.EventSource){if(k.has(n))return;const t={src:null,host:r,clientKey:o,headers:s,cb:e=>{try{if("features-updated"===e.type){const t=v.get(n);t&&t.forEach((t=>{M(t)}))}else if("features"===e.type){const t=JSON.parse(e.data);F(n,i,t)}t.errors=0}catch(e){J(t)}},errors:0,state:"active"};k.set(n,t),I(t)}}function J(t){if("idle"!==t.state&&(t.errors++,t.errors>3||t.src&&2===t.src.readyState)){const e=Math.pow(3,t.errors-3)*(1e3+1e3*Math.random());U(t),setTimeout((()=>{["idle","active"].includes(t.state)||I(t)}),Math.min(e,3e5))}}function U(t){t.src&&(t.src.onopen=null,t.src.onerror=null,t.src.close(),t.src=null,"active"===t.state&&(t.state="disabled"))}function I(t){t.src=w.eventSourceCall({host:t.host,clientKey:t.clientKey,headers:t.headers}),t.state="active",t.src.addEventListener("features",t.cb),t.src.addEventListener("features-updated",t.cb),t.src.onerror=()=>J(t),t.src.onopen=()=>{t.errors=0}}function K(t,e){U(t),k.delete(e)}function j(){S.clear(),k.forEach(K),v.clear(),w.stopIdleListener()}var D=/^[a-zA-Z:_][a-zA-Z0-9:_.-]*$/,L={revert:function(){}},H=new Map,q=new Set;function P(t){var e=H.get(t);return e||H.set(t,e={element:t,attributes:{}}),e}function z(t,e,n,i,r){var s=n(t),o={isDirty:!1,originalValue:s,virtualValue:s,mutations:[],el:t,t:null,observer:new MutationObserver((function(){if("position"!==e||!o.t){"position"===e&&(o.t=setTimeout((function(){o.t=null}),1e3));var i=n(t);"position"===e&&i.parentNode===o.virtualValue.parentNode&&i.insertBeforeNode===o.virtualValue.insertBeforeNode||i!==o.virtualValue&&(o.originalValue=i,r(o))}})),mutationRunner:r,setValue:i,getCurrentValue:n};return"position"===e&&t.parentNode?o.observer.observe(t.parentNode,{childList:!0,subtree:!0,attributes:!1,characterData:!1}):o.observer.observe(t,function(t){return"html"===t?{childList:!0,subtree:!0,attributes:!0,characterData:!0}:{childList:!1,subtree:!1,attributes:!0,attributeFilter:[t]}}(e)),o}function G(t,e){var n=e.getCurrentValue(e.el);e.virtualValue=t,t&&"string"!=typeof t?n&&t.parentNode===n.parentNode&&t.insertBeforeNode===n.insertBeforeNode||(e.isDirty=!0,dt()):t!==n&&(e.isDirty=!0,dt())}function Z(t){var e=t.originalValue;t.mutations.forEach((function(t){return e=t.mutate(e)})),G(function(t){return st||(st=document.createElement("div")),st.innerHTML=t,st.innerHTML}(e),t)}function Q(t){var e=new Set(t.originalValue.split(/\s+/).filter(Boolean));t.mutations.forEach((function(t){return t.mutate(e)})),G(Array.from(e).filter(Boolean).join(" "),t)}function W(t){var e=t.originalValue;t.mutations.forEach((function(t){return e=t.mutate(e)})),G(e,t)}function X(t){var e=t.originalValue;t.mutations.forEach((function(t){var n=function(t){var e=t.insertBeforeSelector,n=document.querySelector(t.parentSelector);if(!n)return null;var i=e?document.querySelector(e):null;return e&&!i?null:{parentNode:n,insertBeforeNode:i}}(t.mutate());e=n||e})),G(e,t)}var Y=function(t){return t.innerHTML},tt=function(t,e){return t.innerHTML=e};function et(t){var e=P(t);return e.html||(e.html=z(t,"html",Y,tt,Z)),e.html}var nt=function(t){return{parentNode:t.parentElement,insertBeforeNode:t.nextElementSibling}},it=function(t,e){e.insertBeforeNode&&!e.parentNode.contains(e.insertBeforeNode)||e.parentNode.insertBefore(t,e.insertBeforeNode)};function rt(t){var e=P(t);return e.position||(e.position=z(t,"position",nt,it,X)),e.position}var st,ot,ut=function(t,e){return e?t.className=e:t.removeAttribute("class")},ct=function(t){return t.className};function at(t){var e=P(t);return e.classes||(e.classes=z(t,"class",ct,ut,Q)),e.classes}function ht(t,e){var n,i=P(t);return i.attributes[e]||(i.attributes[e]=z(t,e,(n=e,function(t){var e;return null!=(e=t.getAttribute(n))?e:null}),function(t){return function(e,n){return null!==n?e.setAttribute(t,n):e.removeAttribute(t)}}(e),W)),i.attributes[e]}function lt(t,e,n){if(n.isDirty){n.isDirty=!1;var i=n.virtualValue;n.mutations.length||function(t,e){var n,i,r=H.get(t);if(r)if("html"===e)null==(n=r.html)||null==(i=n.observer)||i.disconnect(),delete r.html;else if("class"===e){var s,o;null==(s=r.classes)||null==(o=s.observer)||o.disconnect(),delete r.classes}else if("position"===e){var u,c;null==(u=r.position)||null==(c=u.observer)||c.disconnect(),delete r.position}else{var a,h,l;null==(a=r.attributes)||null==(h=a[e])||null==(l=h.observer)||l.disconnect(),delete r.attributes[e]}}(t,e),n.setValue(t,i)}}function ft(t,e){t.html&&lt(e,"html",t.html),t.classes&&lt(e,"class",t.classes),t.position&&lt(e,"position",t.position),Object.keys(t.attributes).forEach((function(n){lt(e,n,t.attributes[n])}))}function dt(){H.forEach(ft)}function yt(t){if("position"!==t.kind||1!==t.elements.size){var e=new Set(t.elements);document.querySelectorAll(t.selector).forEach((function(n){e.has(n)||(t.elements.add(n),function(t,e){var n=null;"html"===t.kind?n=et(e):"class"===t.kind?n=at(e):"attribute"===t.kind?n=ht(e,t.attribute):"position"===t.kind&&(n=rt(e)),n&&(n.mutations.push(t),n.mutationRunner(n))}(t,n))}))}}function pt(){q.forEach(yt)}function wt(t){return"undefined"==typeof document?L:(q.add(t),yt(t),{revert:function(){var e;(e=t).elements.forEach((function(t){return function(t,e){var n=null;if("html"===t.kind?n=et(e):"class"===t.kind?n=at(e):"attribute"===t.kind?n=ht(e,t.attribute):"position"===t.kind&&(n=rt(e)),n){var i=n.mutations.indexOf(t);-1!==i&&n.mutations.splice(i,1),n.mutationRunner(n)}}(e,t)})),e.elements.clear(),q.delete(e)}})}function vt(t,e){return wt({kind:"html",elements:new Set,mutate:e,selector:t})}function gt(t,e){return wt({kind:"class",elements:new Set,mutate:e,selector:t})}function mt(t,e,n){return D.test(e)?"class"===e||"className"===e?gt(t,(function(t){var e=n(Array.from(t).join(" "));t.clear(),e&&e.split(/\s+/g).filter(Boolean).forEach((function(e){return t.add(e)}))})):wt({kind:"attribute",attribute:e,elements:new Set,mutate:n,selector:t}):L}"undefined"!=typeof document&&(ot||(ot=new MutationObserver((function(){pt()}))),pt(),ot.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!1,characterData:!1}));const bt={};function kt(t,e){for(const[n,i]of Object.entries(e))switch(n){case"$or":if(!Et(t,i))return!1;break;case"$nor":if(Et(t,i))return!1;break;case"$and":if(!$t(t,i))return!1;break;case"$not":if(kt(t,i))return!1;break;default:if(!At(i,St(t,n)))return!1}return!0}function St(t,e){const n=e.split(".");let i=t;for(let t=0;t<n.length;t++){if(!i||"object"!=typeof i||!(n[t]in i))return null;i=i[n[t]]}return i}function At(t,e){if("string"==typeof t)return e+""===t;if("number"==typeof t)return 1*e===t;if("boolean"==typeof t)return!!e===t;if(null===t)return null===e;if(Array.isArray(t)||!_t(t))return JSON.stringify(e)===JSON.stringify(t);for(const n in t)if(!xt(n,e,t[n]))return!1;return!0}function _t(t){const e=Object.keys(t);return e.length>0&&e.filter((t=>"$"===t[0])).length===e.length}function Ot(t,e){return Array.isArray(t)?t.some((t=>e.includes(t))):e.includes(t)}function xt(t,e,n){switch(t){case"$veq":return l(e)===l(n);case"$vne":return l(e)!==l(n);case"$vgt":return l(e)>l(n);case"$vgte":return l(e)>=l(n);case"$vlt":return l(e)<l(n);case"$vlte":return l(e)<=l(n);case"$eq":return e===n;case"$ne":return e!==n;case"$lt":return e<n;case"$lte":return e<=n;case"$gt":return e>n;case"$gte":return e>=n;case"$exists":return n?null!=e:null==e;case"$in":return!!Array.isArray(n)&&Ot(e,n);case"$nin":return!!Array.isArray(n)&&!Ot(e,n);case"$not":return!At(n,e);case"$size":return!!Array.isArray(e)&&At(n,e.length);case"$elemMatch":return function(t,e){if(!Array.isArray(t))return!1;const n=_t(e)?t=>At(e,t):t=>kt(t,e);for(let e=0;e<t.length;e++)if(t[e]&&n(t[e]))return!0;return!1}(e,n);case"$all":if(!Array.isArray(e))return!1;for(let t=0;t<n.length;t++){let i=!1;for(let r=0;r<e.length;r++)if(At(n[t],e[r])){i=!0;break}if(!i)return!1}return!0;case"$regex":try{return(i=n,bt[i]||(bt[i]=new RegExp(i.replace(/([^\\])\//g,"$1\\/"))),bt[i]).test(e)}catch(t){return!1}case"$type":return function(t){if(null===t)return"null";if(Array.isArray(t))return"array";const e=typeof t;return["string","number","boolean","object","undefined"].includes(e)?e:"unknown"}(e)===n;default:return console.error("Unknown operator: "+t),!1}var i}function Et(t,e){if(!e.length)return!0;for(let n=0;n<e.length;n++)if(kt(t,e[n]))return!0;return!1}function $t(t,e){for(let n=0;n<e.length;n++)if(!kt(t,e[n]))return!1;return!0}const Ct="undefined"!=typeof window&&"undefined"!=typeof document,Nt=function(){let t;try{t="1.0.1"}catch(e){t=""}return t}();class Rt{constructor(t){if(t=t||{},this.version=Nt,this.i=this.context=t,this.o=t.renderer||null,this.u=new Set,this.h=new Set,this.l={},this.debug=!!t.debug,this.p=new Set,this.v=[],this.g=0,this.ready=!1,this.m=new Map,this.k=new Map,this.S={},this.A=new Map,this._=new Set,this.O=!1,this.$="",this.C=new Map,this.N=!t.disableExperimentsOnLoad,t.remoteEval){if(t.decryptionKey)throw new Error("Encryption is not available for remoteEval");if(!t.clientKey)throw new Error("Missing clientKey");let e=!1;try{e=!!new URL(t.apiHost||"").hostname.match(/growthbook\.io$/i)}catch(t){}if(e)throw new Error("Cannot use remoteEval on GrowthBook Cloud")}else if(t.cacheKeyAttributes)throw new Error("cacheKeyAttributes are only used for remoteEval");if(t.features&&(this.ready=!0),Ct&&t.enableDevMode&&(window._growthbook=this,document.dispatchEvent(new Event("gbloaded"))),t.experiments?(this.ready=!0,this.R()):t.antiFlicker&&this.B(),this.i.stickyBucketService&&this.i.stickyBucketAssignmentDocs)for(const t in this.i.stickyBucketAssignmentDocs){const e=this.i.stickyBucketAssignmentDocs[t];e&&this.i.stickyBucketService.saveAssignments(e).catch((()=>{}))}this.ready&&this.refreshStickyBuckets(this.getPayload())}async setPayload(t){this.T=t;const e=await this.decryptPayload(t);this.F=e,await this.refreshStickyBuckets(e),e.features&&(this.i.features=e.features),e.experiments&&(this.i.experiments=e.experiments,this.R()),this.ready=!0,this.M()}initSync(t){this.O=!0;const e=t.payload;if(e.encryptedExperiments||e.encryptedFeatures)throw new Error("initSync does not support encrypted payloads");if(this.i.stickyBucketService&&!this.i.stickyBucketAssignmentDocs)throw new Error("initSync requires you to pass stickyBucketAssignmentDocs into the GrowthBook constructor");if(this.T=e,this.F=e,e.features&&(this.i.features=e.features),e.experiments&&(this.i.experiments=e.experiments,this.R()),this.ready=!0,t.streaming){if(!this.i.clientKey)throw new Error("Must specify clientKey to enable streaming");V(this,!0),E(this)}return this}async init(t){if(this.O=!0,(t=t||{}).payload){if(await this.setPayload(t.payload),t.streaming){if(!this.i.clientKey)throw new Error("Must specify clientKey to enable streaming");V(this,!0),E(this)}return{success:!0,source:"init"}}{const{data:e,...n}=await this.V({...t,allowStale:!0});return t.streaming&&E(this),await this.setPayload(e||{}),n}}async loadFeatures(t){this.O=!0,(t=t||{}).autoRefresh&&(this.i.subscribeToChanges=!0);const{data:e}=await this.V({...t,allowStale:!0});await this.setPayload(e||{}),this.J()&&E(this)}async refreshFeatures(t){const e=await this.V({...t||{},allowStale:!1});e.data&&await this.setPayload(e.data)}getApiInfo(){return[this.getApiHosts().apiHost,this.getClientKey()]}getApiHosts(){const t=this.i.apiHost||"https://cdn.growthbook.io";return{apiHost:t.replace(/\/*$/,""),streamingHost:(this.i.streamingHost||t).replace(/\/*$/,""),apiRequestHeaders:this.i.apiHostRequestHeaders,streamingHostRequestHeaders:this.i.streamingHostRequestHeaders}}getClientKey(){return this.i.clientKey||""}getPayload(){return this.T||{features:this.getFeatures(),experiments:this.getExperiments()}}getDecryptedPayload(){return this.F||this.getPayload()}isRemoteEval(){return this.i.remoteEval||!1}getCacheKeyAttributes(){return this.i.cacheKeyAttributes}async V(t){var e;let{timeout:n,skipCache:i,allowStale:r,streaming:s}=t;if(!this.i.clientKey)throw new Error("Missing clientKey");return x({instance:this,timeout:n,skipCache:i||this.i.disableCache,allowStale:r,backgroundSync:null===(e=null!=s?s:this.i.backgroundSync)||void 0===e||e})}M(){if(this.o)try{this.o()}catch(t){console.error("Failed to render",t)}}setFeatures(t){this.i.features=t,this.ready=!0,this.M()}async setEncryptedFeatures(t,e,n){const i=await a(t,e||this.i.decryptionKey,n);this.setFeatures(JSON.parse(i))}setExperiments(t){this.i.experiments=t,this.ready=!0,this.R()}async setEncryptedExperiments(t,e,n){const i=await a(t,e||this.i.decryptionKey,n);this.setExperiments(JSON.parse(i))}async decryptPayload(t,e,n){return(t={...t}).encryptedFeatures&&(t.features=JSON.parse(await a(t.encryptedFeatures,e||this.i.decryptionKey,n)),delete t.encryptedFeatures),t.encryptedExperiments&&(t.experiments=JSON.parse(await a(t.encryptedExperiments,e||this.i.decryptionKey,n)),delete t.encryptedExperiments),t}async setAttributes(t){this.i.attributes=t,this.i.stickyBucketService&&await this.refreshStickyBuckets(),this.i.remoteEval?await this.U():(this.M(),this.R())}async updateAttributes(t){return this.setAttributes({...this.i.attributes,...t})}async setAttributeOverrides(t){this.S=t,this.i.stickyBucketService&&await this.refreshStickyBuckets(),this.i.remoteEval?await this.U():(this.M(),this.R())}async setForcedVariations(t){this.i.forcedVariations=t||{},this.i.remoteEval?await this.U():(this.M(),this.R())}setForcedFeatures(t){this.k=t,this.M()}async setURL(t){if(this.i.url=t,this.$="",this.i.remoteEval)return await this.U(),void this.R(!0);this.R(!0)}getAttributes(){return{...this.i.attributes,...this.S}}getForcedVariations(){return this.i.forcedVariations||{}}getForcedFeatures(){return this.k||new Map}getStickyBucketAssignmentDocs(){return this.i.stickyBucketAssignmentDocs||{}}getUrl(){return this.i.url||""}getFeatures(){return this.i.features||{}}getExperiments(){return this.i.experiments||[]}getCompletedChangeIds(){return Array.from(this.h)}subscribe(t){return this.p.add(t),()=>{this.p.delete(t)}}J(){var t;return(null===(t=this.i.backgroundSync)||void 0===t||t)&&this.i.subscribeToChanges}async U(){if(!this.i.remoteEval)return;if(!this.O)return;const t=await this.V({allowStale:!1});t.data&&await this.setPayload(t.data)}getAllResults(){return new Map(this.m)}destroy(){var t;this.p.clear(),this.m.clear(),this.u.clear(),this.h.clear(),this.C.clear(),this.l={},this.v=[],this.T=void 0,this.g&&clearTimeout(this.g),t=this,v.forEach((e=>e.delete(t))),Ct&&window._growthbook===this&&delete window._growthbook,this.A.forEach((t=>{t.undo()})),this.A.clear(),this._.clear()}setRenderer(t){this.o=t}forceVariation(t,e){this.i.forcedVariations=this.i.forcedVariations||{},this.i.forcedVariations[t]=e,this.i.remoteEval?this.U():(this.R(),this.M())}run(t){const e=this.I(t,null);return this.K(t,e),e}triggerExperiment(t){return this._.add(t),this.i.experiments?this.i.experiments.filter((e=>e.key===t)).map((t=>this.j(t))).filter((t=>null!==t)):null}triggerAutoExperiments(){this.N=!0,this.R(!0)}j(t,e){const n=this.A.get(t);if(t.manual&&!this._.has(t.key)&&!n)return null;const i=this.D(t)?this.L(t,-1,!1,""):this.run(t),r=JSON.stringify(i.value);if(!e&&i.inExperiment&&n&&n.valueHash===r)return i;if(n&&this.H(t),i.inExperiment){const e=d(t);if("redirect"===e&&i.value.urlRedirect&&t.urlPatterns){const e=t.persistQueryString?function(t,e){let n,i;try{n=new URL(t),i=new URL(e)}catch(t){return console.error("Unable to merge query strings: ".concat(t)),e}return n.searchParams.forEach(((t,e)=>{i.searchParams.has(e)||i.searchParams.set(e,t)})),i.toString()}(this.q(),i.value.urlRedirect):i.value.urlRedirect;if(o(e,t.urlPatterns))return this.log("Skipping redirect because original URL matches redirect URL",{id:t.key}),i;this.$=e;const n=this.P();var s;if(n)if(Ct)this.B(),window.setTimeout((()=>{try{n(e)}catch(t){console.error(t)}}),null!==(s=this.i.navigateDelay)&&void 0!==s?s:100);else try{n(e)}catch(t){console.error(t)}}else if("visual"===e){const e=this.i.applyDomChangesCallback?this.i.applyDomChangesCallback(i.value):this.G(i.value);e&&this.A.set(t,{undo:e,valueHash:r})}}return i}H(t){const e=this.A.get(t);e&&(e.undo(),this.A.delete(t))}R(t){if(!this.N)return;const e=this.i.experiments||[],n=new Set(e);this.A.forEach(((t,e)=>{n.has(e)||(t.undo(),this.A.delete(e))}));for(const n of e){const e=this.j(n,t);if(null!=e&&e.inExperiment&&"redirect"===d(n))break}}K(t,e){const n=t.key,i=this.m.get(n);i&&i.result.inExperiment===e.inExperiment&&i.result.variationId===e.variationId||(this.m.set(n,{experiment:t,result:e}),this.p.forEach((n=>{try{n(t,e)}catch(t){console.error(t)}})))}Z(t,e){if("override"===e.source)return;const n=JSON.stringify(e.value);if(this.l[t]!==n){if(this.l[t]=n,this.i.onFeatureUsage)try{this.i.onFeatureUsage(t,e)}catch(t){}Ct&&window.fetch&&(this.v.push({key:t,on:e.on}),this.g||(this.g=window.setTimeout((()=>{this.g=0;const t=[...this.v];this.v=[],this.i.realtimeKey&&window.fetch("https://rt.growthbook.io/?key=".concat(this.i.realtimeKey,"&events=").concat(encodeURIComponent(JSON.stringify(t))),{cache:"no-cache",mode:"no-cors"}).catch((()=>{}))}),this.i.realtimeInterval||2e3)))}}W(t,e,n,i,r,s){const o={value:e,on:!!e,off:!e,source:n,ruleId:i||""};return r&&(o.experiment=r),s&&(o.experimentResult=s),this.Z(t,o),o}isOn(t){return this.evalFeature(t).on}isOff(t){return this.evalFeature(t).off}getFeatureValue(t,e){const n=this.evalFeature(t).value;return null===n?e:n}feature(t){return this.evalFeature(t)}evalFeature(t){return this.X(t)}X(t,e){if((e=e||{evaluatedFeatures:new Set}).evaluatedFeatures.has(t))return this.W(t,null,"cyclicPrerequisite");if(e.evaluatedFeatures.add(t),e.id=t,this.k.has(t))return this.W(t,this.k.get(t),"override");if(!this.i.features||!this.i.features[t])return this.W(t,null,"unknownFeature");const n=this.i.features[t];if(n.rules)t:for(const i of n.rules){if(i.parentConditions)for(const n of i.parentConditions){const i=this.X(n.id,e);if("cyclicPrerequisite"===i.source)return this.W(t,null,"cyclicPrerequisite");if(!kt({value:i.value},n.condition||{})){if(n.gate)return this.W(t,null,"prerequisite");continue t}}if(i.filters&&this.Y(i.filters))continue;if("force"in i){if(i.condition&&!this.tt(i.condition))continue;if(!this.et(i.seed||t,i.hashAttribute,this.i.stickyBucketService&&!i.disableStickyBucketing?i.fallbackAttribute:void 0,i.range,i.coverage,i.hashVersion))continue;return i.tracks&&i.tracks.forEach((t=>{this.nt(t.experiment,t.result)})),this.W(t,i.force,"force",i.id)}if(!i.variations)continue;const n={variations:i.variations,key:i.key||t};"coverage"in i&&(n.coverage=i.coverage),i.weights&&(n.weights=i.weights),i.hashAttribute&&(n.hashAttribute=i.hashAttribute),i.fallbackAttribute&&(n.fallbackAttribute=i.fallbackAttribute),i.disableStickyBucketing&&(n.disableStickyBucketing=i.disableStickyBucketing),void 0!==i.bucketVersion&&(n.bucketVersion=i.bucketVersion),void 0!==i.minBucketVersion&&(n.minBucketVersion=i.minBucketVersion),i.namespace&&(n.namespace=i.namespace),i.meta&&(n.meta=i.meta),i.ranges&&(n.ranges=i.ranges),i.name&&(n.name=i.name),i.phase&&(n.phase=i.phase),i.seed&&(n.seed=i.seed),i.hashVersion&&(n.hashVersion=i.hashVersion),i.filters&&(n.filters=i.filters),i.condition&&(n.condition=i.condition);const r=this.I(n,t);if(this.K(n,r),r.inExperiment&&!r.passthrough)return this.W(t,r.value,"experiment",i.id,n,r)}return this.W(t,void 0===n.defaultValue?null:n.defaultValue,"defaultValue")}et(t,e,n,s,o,u){if(!s&&void 0===o)return!0;if(!s&&0===o)return!1;const{hashValue:c}=this.it(e,n);if(!c)return!1;const a=i(t,c,u||1);return null!==a&&(s?r(a,s):void 0===o||a<=o)}tt(t){return kt(this.getAttributes(),t)}Y(t){return t.some((t=>{const{hashValue:e}=this.it(t.attribute);if(!e)return!0;const n=i(t.seed,e,t.hashVersion||2);return null===n||!t.ranges.some((t=>r(n,t)))}))}I(t,e){const n=t.key,s=t.variations.length;if(s<2)return this.L(t,-1,!1,e);if(!1===this.i.enabled)return this.L(t,-1,!1,e);if((t=this.rt(t)).urlPatterns&&!o(this.q(),t.urlPatterns))return this.L(t,-1,!1,e);const u=function(t,e,n){if(!e)return null;const i=e.split("?")[1];if(!i)return null;const r=i.replace(/#.*/,"").split("&").map((t=>t.split("=",2))).filter((e=>{let[n]=e;return n===t})).map((t=>{let[,e]=t;return parseInt(e)}));return r.length>0&&r[0]>=0&&r[0]<n?r[0]:null}(n,this.q(),s);if(null!==u)return this.L(t,u,!1,e);if(this.i.forcedVariations&&n in this.i.forcedVariations)return this.L(t,this.i.forcedVariations[n],!1,e);if("draft"===t.status||!1===t.active)return this.L(t,-1,!1,e);const{hashAttribute:c,hashValue:a}=this.it(t.hashAttribute,this.i.stickyBucketService&&!t.disableStickyBucketing?t.fallbackAttribute:void 0);if(!a)return this.L(t,-1,!1,e);let l=-1,f=!1,d=!1;if(this.i.stickyBucketService&&!t.disableStickyBucketing){const{variation:e,versionIsBlocked:n}=this.st({expKey:t.key,expBucketVersion:t.bucketVersion,expHashAttribute:t.hashAttribute,expFallbackAttribute:t.fallbackAttribute,expMinBucketVersion:t.minBucketVersion,expMeta:t.meta});f=e>=0,l=e,d=!!n}if(!f){if(t.filters){if(this.Y(t.filters))return this.L(t,-1,!1,e)}else if(t.namespace&&!function(t,e){const n=i("__"+e[0],t,1);return null!==n&&n>=e[1]&&n<e[2]}(a,t.namespace))return this.L(t,-1,!1,e);if(t.include&&!function(t){try{return t()}catch(t){return console.error(t),!1}}(t.include))return this.L(t,-1,!1,e);if(t.condition&&!this.tt(t.condition))return this.L(t,-1,!1,e);if(t.parentConditions)for(const n of t.parentConditions){const i=this.X(n.id);if("cyclicPrerequisite"===i.source)return this.L(t,-1,!1,e);if(!kt({value:i.value},n.condition||{}))return this.L(t,-1,!1,e)}if(t.groups&&!this.ot(t.groups))return this.L(t,-1,!1,e)}if(t.url&&!this.ut(t.url))return this.L(t,-1,!1,e);const y=i(t.seed||n,a,t.hashVersion||1);if(null===y)return this.L(t,-1,!1,e);if(f||(l=function(t,e){for(let n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}(y,t.ranges||function(t,e,n){(e=void 0===e?1:e)<0?e=0:e>1&&(e=1);const i=(r=t)<=0?[]:new Array(r).fill(1/r);var r;(n=n||i).length!==t&&(n=i);const s=n.reduce(((t,e)=>e+t),0);(s<.99||s>1.01)&&(n=i);let o=0;return n.map((t=>{const n=o;return o+=t,[n,n+e*t]}))}(s,void 0===t.coverage?1:t.coverage,t.weights))),d)return this.L(t,-1,!1,e,void 0,!0);if(l<0)return this.L(t,-1,!1,e);if("force"in t)return this.L(t,void 0===t.force?-1:t.force,!1,e);if(this.i.qaMode)return this.L(t,-1,!1,e);if("stopped"===t.status)return this.L(t,-1,!1,e);const p=this.L(t,l,!0,e,y,f);if(this.i.stickyBucketService&&!t.disableStickyBucketing){const{changed:e,key:n,doc:i}=this.ct(c,h(a),{[this.ht(t.key,t.bucketVersion)]:p.key});e&&(this.i.stickyBucketAssignmentDocs=this.i.stickyBucketAssignmentDocs||{},this.i.stickyBucketAssignmentDocs[n]=i,this.i.stickyBucketService.saveAssignments(i))}return this.nt(t,p),"changeId"in t&&t.changeId&&this.h.add(t.changeId),p}log(t,e){this.debug&&(this.i.log?this.i.log(t,e):console.log(t,e))}getDeferredTrackingCalls(){return Array.from(this.C.values())}setDeferredTrackingCalls(t){this.C=new Map(t.filter((t=>t&&t.experiment&&t.result)).map((t=>[this.lt(t.experiment,t.result),t])))}fireDeferredTrackingCalls(){this.i.trackingCallback&&(this.C.forEach((t=>{t&&t.experiment&&t.result?this.nt(t.experiment,t.result):console.error("Invalid deferred tracking call",{call:t})})),this.C.clear())}setTrackingCallback(t){this.i.trackingCallback=t,this.fireDeferredTrackingCalls()}lt(t,e){return e.hashAttribute+e.hashValue+t.key+e.variationId}nt(t,e){const n=this.lt(t,e);if(this.i.trackingCallback){if(!this.u.has(n)){this.u.add(n);try{this.i.trackingCallback(t,e)}catch(t){console.error(t)}}}else this.C.has(n)||this.C.set(n,{experiment:t,result:e})}rt(t){const e=t.key,n=this.i.overrides;return n&&n[e]&&"string"==typeof(t=Object.assign({},t,n[e])).url&&(t.url=s(t.url)),t}it(t,e){let n=t||"id",i="";return this.S[n]?i=this.S[n]:this.i.attributes?i=this.i.attributes[n]||"":this.i.user&&(i=this.i.user[n]||""),!i&&e&&(this.S[e]?i=this.S[e]:this.i.attributes?i=this.i.attributes[e]||"":this.i.user&&(i=this.i.user[e]||""),i&&(n=e)),{hashAttribute:n,hashValue:i}}L(t,e,n,i,r,s){let o=!0;(e<0||e>=t.variations.length)&&(e=0,o=!1);const{hashAttribute:u,hashValue:c}=this.it(t.hashAttribute,this.i.stickyBucketService&&!t.disableStickyBucketing?t.fallbackAttribute:void 0),a=t.meta?t.meta[e]:{},h={key:a.key||""+e,featureId:i,inExperiment:o,hashUsed:n,variationId:e,value:t.variations[e],hashAttribute:u,hashValue:c,stickyBucketUsed:!!s};return a.name&&(h.name=a.name),void 0!==r&&(h.bucket=r),a.passthrough&&(h.passthrough=a.passthrough),h}q(){return this.i.url||(Ct?window.location.href:"")}ut(t){const e=this.q();if(!e)return!1;const n=e.replace(/^https?:\/\//,"").replace(/^[^/]*\//,"/");return!!t.test(e)||!!t.test(n)}ot(t){const e=this.i.groups||{};for(let n=0;n<t.length;n++)if(e[t[n]])return!0;return!1}D(t){const e=d(t);if("visual"===e){if(this.i.disableVisualExperiments)return!0;if(this.i.disableJsInjection&&t.variations.some((t=>t.js)))return!0}else{if("redirect"!==e)return!0;if(this.i.disableUrlRedirectExperiments)return!0;try{const e=new URL(this.q());for(const n of t.variations){if(!n||!n.urlRedirect)continue;const t=new URL(n.urlRedirect);if(this.i.disableCrossOriginUrlRedirectExperiments){if(t.protocol!==e.protocol)return!0;if(t.host!==e.host)return!0}}}catch(e){return this.log("Error parsing current or redirect URL",{id:t.key,error:e}),!0}}return!(!t.changeId||!(this.i.blockedChangeIds||[]).includes(t.changeId))}getRedirectUrl(){return this.$}P(){return this.i.navigate?this.i.navigate:Ct?t=>{window.location.replace(t)}:null}B(){if(this.i.antiFlicker&&Ct)try{var t;const e=document.createElement("style");e.innerHTML=".gb-anti-flicker { opacity: 0 !important; pointer-events: none; }",document.head.appendChild(e),document.documentElement.classList.add("gb-anti-flicker"),setTimeout((()=>{document.documentElement.classList.remove("gb-anti-flicker")}),null!==(t=this.i.antiFlickerTimeout)&&void 0!==t?t:3500)}catch(t){console.error(t)}}G(t){if(!Ct)return;const e=[];if(t.css){const n=document.createElement("style");n.innerHTML=t.css,document.head.appendChild(n),e.push((()=>n.remove()))}if(t.js){const n=document.createElement("script");n.innerHTML=t.js,this.i.jsInjectionNonce&&(n.nonce=this.i.jsInjectionNonce),document.head.appendChild(n),e.push((()=>n.remove()))}return t.domMutations&&t.domMutations.forEach((t=>{e.push(function(t){var e=t.selector,n=t.action,i=t.value,r=t.attribute,s=t.parentSelector,o=t.insertBeforeSelector;if("html"===r){if("append"===n)return vt(e,(function(t){return t+(null!=i?i:"")}));if("set"===n)return vt(e,(function(){return null!=i?i:""}))}else if("class"===r){if("append"===n)return gt(e,(function(t){i&&t.add(i)}));if("remove"===n)return gt(e,(function(t){i&&t.delete(i)}));if("set"===n)return gt(e,(function(t){t.clear(),i&&t.add(i)}))}else if("position"===r){if("set"===n&&s)return function(t,e){return wt({kind:"position",elements:new Set,mutate:function(){return{insertBeforeSelector:o,parentSelector:s}},selector:t})}(e)}else{if("append"===n)return mt(e,r,(function(t){return null!==t?t+(null!=i?i:""):null!=i?i:""}));if("set"===n)return mt(e,r,(function(){return null!=i?i:""}));if("remove"===n)return mt(e,r,(function(){return null}))}return L}(t).revert)})),()=>{e.forEach((t=>t()))}}ft(t){const e=new Set,n=t&&t.features?t.features:this.getFeatures(),i=t&&t.experiments?t.experiments:this.getExperiments();return Object.keys(n).forEach((t=>{const i=n[t];if(i.rules)for(const t of i.rules)t.variations&&(e.add(t.hashAttribute||"id"),t.fallbackAttribute&&e.add(t.fallbackAttribute))})),i.map((t=>{e.add(t.hashAttribute||"id"),t.fallbackAttribute&&e.add(t.fallbackAttribute)})),Array.from(e)}async refreshStickyBuckets(t){if(this.i.stickyBucketService){const e=this.dt(t);this.i.stickyBucketAssignmentDocs=await this.i.stickyBucketService.getAllAssignments(e)}}yt(t,e){if(!this.i.stickyBucketAssignmentDocs)return{};const{hashAttribute:n,hashValue:i}=this.it(t),r="".concat(n,"||").concat(h(i)),{hashAttribute:s,hashValue:o}=this.it(e),u=o?"".concat(s,"||").concat(h(o)):null,c={};return u&&this.i.stickyBucketAssignmentDocs[u]&&Object.assign(c,this.i.stickyBucketAssignmentDocs[u].assignments||{}),this.i.stickyBucketAssignmentDocs[r]&&Object.assign(c,this.i.stickyBucketAssignmentDocs[r].assignments||{}),c}st(t){let{expKey:e,expBucketVersion:n,expHashAttribute:i,expFallbackAttribute:r,expMinBucketVersion:s,expMeta:o}=t;n=n||0,s=s||0,i=i||"id",o=o||[];const u=this.ht(e,n),c=this.yt(i,r);if(s>0)for(let t=0;t<=s;t++)if(void 0!==c[this.ht(e,t)])return{variation:-1,versionIsBlocked:!0};const a=c[u];if(void 0===a)return{variation:-1};const h=o.findIndex((t=>t.key===a));return h<0?{variation:-1}:{variation:h}}ht(t,e){return e=e||0,"".concat(t,"__").concat(e)}dt(t){const e={};return this.i.stickyBucketIdentifierAttributes=this.i.stickyBucketIdentifierAttributes?this.i.stickyBucketIdentifierAttributes:this.ft(t),this.i.stickyBucketIdentifierAttributes.forEach((t=>{const{hashValue:n}=this.it(t);e[t]=h(n)})),e}ct(t,e,n){const i="".concat(t,"||").concat(e),r=this.i.stickyBucketAssignmentDocs&&this.i.stickyBucketAssignmentDocs[i]&&this.i.stickyBucketAssignmentDocs[i].assignments||{},s={...r,...n};return{key:i,doc:{attributeName:t,attributeValue:e,assignments:s},changed:JSON.stringify(r)!==JSON.stringify(s)}}}async function Bt(t){const e=new Rt(t);await x({instance:e,skipCache:t.skipCache,allowStale:!1,backgroundSync:t.streaming}),e.destroy()}class Tt{async getAllAssignments(t){const e={};return(await Promise.all(Object.entries(t).map((t=>{let[e,n]=t;return this.getAssignments(e,n)})))).forEach((t=>{if(t){const n="".concat(t.attributeName,"||").concat(t.attributeValue);e[n]=t}})),e}}class Ft extends Tt{constructor(t){t=t||{},super(),this.prefix=t.prefix||"gbStickyBuckets__";try{this.localStorage=t.localStorage||globalThis.localStorage}catch(t){}}async getAssignments(t,e){const n="".concat(t,"||").concat(e);let i=null;if(!this.localStorage)return i;try{const t=await this.localStorage.getItem(this.prefix+n)||"{}",e=JSON.parse(t);e.attributeName&&e.attributeValue&&e.assignments&&(i=e)}catch(t){}return i}async saveAssignments(t){const e="".concat(t.attributeName,"||").concat(t.attributeValue);if(this.localStorage)try{await this.localStorage.setItem(this.prefix+e,JSON.stringify(t))}catch(t){}}}class Mt extends Tt{constructor(t){let{prefix:e="gbStickyBuckets__",req:n,res:i,cookieAttributes:r={}}=t;super(),this.prefix=e,this.req=n,this.res=i,this.cookieAttributes=r}async getAssignments(t,e){const n="".concat(t,"||").concat(e);let i=null;if(!this.req)return i;try{const t=JSON.parse(this.req.cookies[this.prefix+n]||"{}");t.attributeName&&t.attributeValue&&t.assignments&&(i=t)}catch(t){}return i}async saveAssignments(t){const e="".concat(t.attributeName,"||").concat(t.attributeValue);if(!this.res)return;const n=JSON.stringify(t);this.res.cookie(encodeURIComponent(this.prefix+e),encodeURIComponent(n),this.cookieAttributes)}}class Vt extends Tt{constructor(t){let{prefix:e="gbStickyBuckets__",jsCookie:n,cookieAttributes:i={}}=t;super(),this.prefix=e,this.jsCookie=n,this.cookieAttributes=i}async getAssignments(t,e){const n="".concat(t,"||").concat(e);let i=null;if(!this.jsCookie)return i;try{const t=this.jsCookie.get(this.prefix+n),e=JSON.parse(t||"{}");e.attributeName&&e.attributeValue&&e.assignments&&(i=e)}catch(t){}return i}async saveAssignments(t){const e="".concat(t.attributeName,"||").concat(t.attributeValue);if(!this.jsCookie)return;const n=JSON.stringify(t);this.jsCookie.set(this.prefix+e,n,this.cookieAttributes)}}class Jt extends Tt{constructor(t){let{redis:e}=t;super(),this.redis=e}async getAllAssignments(t){const e={},n=Object.entries(t).map((t=>{let[e,n]=t;return"".concat(e,"||").concat(n)}));return this.redis?(await this.redis.mget(...n).then((t=>{t.forEach((t=>{try{const n=JSON.parse(t||"{}");if(n.attributeName&&n.attributeValue&&n.assignments){const t="".concat(n.attributeName,"||").concat(n.attributeValue);e[t]=n}}catch(t){}}))})),e):e}async getAssignments(t,e){return null}async saveAssignments(t){const e="".concat(t.attributeName,"||").concat(t.attributeValue);this.redis&&await this.redis.set(e,JSON.stringify(t))}}export{Vt as BrowserCookieStickyBucketService,Mt as ExpressCookieStickyBucketService,Rt as GrowthBook,Ft as LocalStorageStickyBucketService,Jt as RedisStickyBucketService,Tt as StickyBucketService,O as clearCache,_ as configureCache,kt as evalCondition,d as getAutoExperimentChangeType,e as getPolyfills,w as helpers,o as isURLTargeted,$ as onHidden,C as onVisible,l as paddedVersionString,Bt as prefetchPayload,A as setPolyfills};
//# sourceMappingURL=esm.min.js.map
